% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/because_format_data.R
\name{because_format_data}
\alias{because_format_data}
\title{Format Data for Because Analysis}
\usage{
because_format_data(data, species_col = "SP", tree)
}
\arguments{
\item{data}{A data.frame in long format with one row per observation.}

\item{species_col}{Name of the column containing species identifiers (default: "SP").}

\item{tree}{A phylogenetic tree (class \code{phylo}). Required to determine species order.}
}
\value{
A named list where each element is either:
  \itemize{
    \item A numeric vector (if all species have exactly 1 observation)
    \item A numeric matrix with species in rows and replicates in columns
  }
  Species are ordered to match \code{tree$tip.label}.
}
\description{
Converts data from long format (one row per observation) to the list format
required by \code{\link{because}}.
}
\details{
This function handles:
\itemize{
  \item Different numbers of replicates per species (creates rectangular matrix with NA padding)
  \item Missing values (NA)
  \item Automatic alignment with phylogenetic tree tip labels
}

When species have different numbers of replicates, the function creates a matrix
with dimensions (number of species) x (maximum number of replicates).
Species with fewer replicates are padded with NA values.

Species in the tree but not in the data will have all NA values.
Species in the data but not in the tree will be excluded with a warning.
}
\examples{
\dontrun{
# Example data in long format
data_long <- data.frame(
  SP = c("sp1", "sp1", "sp1", "sp2", "sp2", "sp3"),
  BM = c(1.2, 1.3, 1.1, 2.1, 2.2, 1.8),
  NL = c(0.5, 0.6, NA, 0.7, 0.8, 0.9)
)

tree <- ape::read.tree(text = "(sp1:1,sp2:1,sp3:1);")
data_list <- because_format_data(data_long, species_col = "SP", tree = tree)

# Use with because
fit <- because(data = data_list, tree = tree, equations = list(NL ~ BM))
}

}
