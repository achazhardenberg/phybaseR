<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting Started with because • because</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started with because">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">because</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/01_getting_started.html">Getting Started with because</a></li>
    <li><a class="dropdown-item" href="../articles/02_dseparation.html">Causal inference with d-separation</a></li>
    <li><a class="dropdown-item" href="../articles/03_phylogenetic_models.html">Phylogenetic Models</a></li>
    <li><a class="dropdown-item" href="../articles/04_missing_data.html">Missing Data Imputation in because</a></li>
    <li><a class="dropdown-item" href="../articles/05_custom_priors.html">Custom Priors and Mechanistic Constraints</a></li>
    <li><a class="dropdown-item" href="../articles/06_mediation.html">06. Automated Mediation Analysis</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/because-pkg/because/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Getting Started with because</h1>
                        <h4 data-toc-skip class="author">Achaz von
Hardenberg</h4>
            
            <h4 data-toc-skip class="date">2025-12-20</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/because-pkg/because/blob/master/vignettes/01_getting_started.Rmd" class="external-link"><code>vignettes/01_getting_started.Rmd</code></a></small>
      <div class="d-none name"><code>01_getting_started.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<p><strong>because</strong> is an R package designed to easily perform
causal inference with Bayesian Structural Equation Models in JAGS. The
package integrates the methods proposed by von Hardenberg &amp;
Gonzalez-Voyer (2025) to fit Phylogenetic Bayesian Structural Equation
Models (PhyBaSE) and extends them to other types of covariance
structures (eg. spatial autocorrelation, genetic relatedness etc.).</p>
<p><strong>because</strong> main features:</p>
<ul>
<li>
<a href="02_dseparation.html">Causal Inference with
d-Separation</a>: Testing conditional independencies implied by your
causal model.</li>
<li>
<a href="03_phylogenetic_models.html">Phylogenetic Path
Analysis</a>: Using the Phylogenetic Bayesian Structural Equation Model
approach (PhyBaSE, von Hardenberg &amp; Gonzalez-Voyer, 2025).</li>
<li>
<a href="04_missing_data.html">Missing Data Imputation</a>: Handling
missing data using Bayesian imputation.</li>
<li>
<a href="05_custom_priors.html">Custom Priors and Mechanistic
Constraints</a>: Incorporating prior knowledge and mechanistic
constraints.</li>
<li>
<em>Alternative Covariance structures:</em> Spatial, genetic,
social, or other correlation structures. <em>Alternative dustribution
families:</em> Modeling non-Gaussian data.
<ul>
<li>Gaussian (continuous data)</li>
<li>Binomial (binary/proportion data)</li>
<li>Multinomial (unordered categorical data)</li>
<li>Ordinal (ordered categorical data)</li>
<li>Poisson (count data)</li>
<li>Negative Binomial (overdispersed count data</li>
<li>Zero inflated Poissson (ZIP) and negative binomial (ZINB)</li>
</ul>
</li>
<li>
<em>Advanced Model Specifications:</em> random effects (mixed
models, nested designs), polynomial terms, interaction terms,categorical
predictors, measurement error, missing data, phylogenetic
uncertainty.</li>
<li>
<em>Hierarchical Data:</em> Multi-level data with variables at
different hierarchical levels.</li>
<li>
<em>Latent Variables and MAG:</em> Measurement error models and
causal inference in the presence of latent variables using the MAG
approach by Shipley &amp; Douda (2021).</li>
<li>
<em>Model Diagnostics:</em> Checking convergence, comparing models,
and interpreting results.</li>
</ul>
<div class="section level3">
<h3 id="quick-start">Quick Start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h3>
<div class="section level4">
<h4 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h4>
<p>Before using <strong>because</strong>, you need to have
<strong>JAGS</strong> (Just Another Gibbs Sampler) installed on your
machine.</p>
<ul>
<li>
<strong>macOS</strong>: <code>brew install jags</code> or download
from <a href="http://mcmc-jags.sourceforge.net" class="external-link">SourceForge</a>.</li>
<li>
<strong>Windows</strong>: Download installer from <a href="http://mcmc-jags.sourceforge.net" class="external-link">SourceForge</a>.</li>
<li>
<strong>Linux</strong>: <code>sudo apt-get install jags</code>.</li>
</ul>
<p>After installing JAGS, you can install <code>because</code> from
GitHub.</p>
<p>To install the <strong>stable release</strong>
(<code>v0.9.6</code>):</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"because-pkg/because@v0.9.6"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>To install the <strong>latest development version</strong>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"because-pkg/because"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Finally, load the package:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://because-pkg.github.io/because/">because</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="your-first-model">Your First Model<a class="anchor" aria-label="anchor" href="#your-first-model"></a>
</h4>
<p>The main function in because is <code><a href="../reference/because.html">because()</a></code>, which
compiles and fits your specified Structural Equation Model in JAGS. The
function is very rich with functionalities allowing to model complex
models with different error structures and hierarchically structured
data. However, here, to show the basic workflow, we will use because()
to fit a simple linear model involving only two variables. Having only
two variables this is not a typical SEM being equivalent to a simple
linear regression which can not be used to infer causality, but it
serves to illustrate the basic usage of the package.</p>
<p>Let’s start simulating two variables X and Y where Y is correlated to
X:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set seed for reproducibility</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">67</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Simulate predictor</span></span>
<span><span class="va">X</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">100</span>, mean <span class="op">=</span> <span class="fl">50</span>, sd <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate response with the chosen intercept (alpha) and slope (beta)</span></span>
<span><span class="va">alpha</span> <span class="op">&lt;-</span> <span class="fl">20</span></span>
<span><span class="va">Y</span> <span class="op">&lt;-</span> <span class="va">alpha</span> <span class="op">+</span> <span class="va">beta</span> <span class="op">*</span> <span class="va">X</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, mean <span class="op">=</span> <span class="fl">0</span>, sd <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Combine into data frame</span></span>
<span><span class="va">sim.dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">Y</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Fit linear model with lm() function for comparison</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="va">X</span>, data <span class="op">=</span> <span class="va">sim.dat</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Now we can fit the same model using because. We need to specify the
structural equations (in this case only one) using R’s formula syntax
and then call <code><a href="../reference/because.html">because()</a></code> passing the equation and the data
frame:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define the equations</span></span>
<span><span class="va">equations</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="va">X</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Fit the model</span></span>
<span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/because.html">because</a></span><span class="op">(</span></span>
<span>  equations <span class="op">=</span> <span class="va">equations</span>,</span>
<span>  data <span class="op">=</span> <span class="va">sim.dat</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View results</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></code></pre></div>
<p>To check for convergence of the MCMC chains, you can look at the Rhat
values in the summary output (should be &lt; 1.1). You can also plot the
trace plots of the MCMC samples:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot trace plots</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fit</span><span class="op">$</span><span class="va">samples</span><span class="op">)</span></span></code></pre></div>
<p><img src="figures/traceplot_1.png" class="r-plt" width="100%"></p>
<p><code>fit$samples</code> is an MCMC object, so you can use all coda
functions to analyze and plot the MCMC samples.</p>
<p>You can see how <code><a href="../reference/because.html">because()</a></code> translates your model into
JAGS syntax calling <code>fit$model</code> or, before fitting it, using
<code><a href="../reference/because_model.html">because_model()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate JAGS model code</span></span>
<span><span class="va">jags_model_code</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/because_model.html">because_model</a></span><span class="op">(</span></span>
<span>  equations <span class="op">=</span> <span class="va">equations</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">jags_model_code</span><span class="op">$</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<p>When specifing the equations you can include multiple predictors as
well as factors,interaction terms and polynomial terms following the
conventional R formula syntax.</p>
</div>
</div>
<div class="section level3">
<h3 id="next-causal-inference-with-d-separation">Next: Causal Inference with D-Separation<a class="anchor" aria-label="anchor" href="#next-causal-inference-with-d-separation"></a>
</h3>
<p>One of the main features of because is the ability to test your
causal model’s fit to the data using d-separation tests. D-separation
tests evaluate whether the conditional independencies implied by your
causal model hold in the data (Shipley, 2016). If they do not, this
suggests that your model may be misspecified and that you may need to
add or remove paths. More details on d-separation tests, how to
interpret them and a full tutorial can be found in the <a href="02_dseparation.html">Causal inference with d-separation</a>
vignette.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Achaz von Hardenberg.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
